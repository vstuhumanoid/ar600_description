<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

	<!--
		Solid Works conversion
		x <- -x
		y <-  z
		z <-  y
	-->

	<xacro:macro name="arm" params="parent side"> 
		<xacro:left_right side="${side}"/>

		<link name="shoulder_fork_${side}">
	 		<xacro:meshes file="shoulder_fork_${side}" collision="True"/>
	 		<inertial>
	 			<!-- should be 0.04, but -0.04 fits -->
	 			<origin xyz="${-0.04 * x_sign} -0.01 0" rpy="0 0 0"/>
      			<mass value="1.362"/>
      			<inertia ixx="1.0" ixy="1.0" ixz="1.0"
      				     iyy="1.0" iyz="1.0"
      				     izz="1.0"/>
    		</inertial>
	 	</link>

	 	<link name="shoulder_${side}">
	 		<xacro:meshes file="shoulder_${side}" collision="True"/>
	 		<inertial>
	 			<origin xyz="0 0 -0.05" rpy="0 0 0"/>
      			<mass value="1.558"/>
      			<inertia ixx="1.0" ixy="1.0" ixz="1.0"
      				     iyy="1.0" iyz="1.0"
      				     izz="1.0"/>
    		</inertial>
	 	</link>

	 	<!-- shoulder x (forward) -->
	 	<joint name="shoulder_f_joint_${side}"
	 		   type="revolute">
	 		<parent link="${parent}"/>
	 		<child link="shoulder_fork_${side}"/>
	 		
	 		<!-- incorrect -->
	 		<origin xyz="${0.197 * cos(10 * d2r) * x_sign} ${0.197 * sin(10 * d2r)} 0" rpy="0 0 ${10 * d2r * x_sign}"/>
	 		<axis xyz="1 0 0"/>
	 		<limit lower="${-15*d2r}" upper="${90*d2r}" effort="10" velocity="10"/>
	 	</joint>

	 	<!-- shoulder y (side) -->
	 	<joint name="shoulder_s_joint_${side}"
	 		   type="revolute">
	 		<parent link="shoulder_fork_${side}"/>
	 		<child link="shoulder_${side}"/>
	 		<origin xyz="0 0 0" rpy="0 0 0"/>
	 		<axis xyz="0 1 0"/>	 		
	 		<xacro:lr_limit side="${side}" lower="0" upper="${105*d2r}" effort="10" velocity="10"/>
	 	</joint>

	 	<xacro:transmission_block joint_name="shoulder_f_joint_${side}"/>
	 	<xacro:transmission_block joint_name="shoulder_s_joint_${side}"/>

	</xacro:macro>
</robot>